<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>em-odp: em_pool_cfg_t Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doc-stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">em-odp
   &#160;<span id="projectnumber">2.5.0</span>
   </div>
   <div id="projectbrief">Event Machine on ODP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d2/db5/structem__pool__cfg__t.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">em_pool_cfg_t Struct Reference<div class="ingroups"><a class="el" href="../../d1/d85/group__em__pool.html">Event Pool</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a8df13d5f2195860c030809996ca4f493"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a8df13d5f2195860c030809996ca4f493">event_type</a></td></tr>
<tr class="separator:a8df13d5f2195860c030809996ca4f493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678d88ad0058d00769a05499c23b9232"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:aca55d103109c4bc76a49aef842ed4818"><td class="memItemLeft" >&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#ae568883982b786f72700d252f3ff6606">in_use</a></td></tr>
<tr class="separator:aca55d103109c4bc76a49aef842ed4818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d2dfe2cbb9b419618e363eaf4ad6ef3"><td class="memItemLeft" >&#160;&#160;&#160;uint32_t&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a5e0eec3471d58a55b3a94efddd7b5da7">value</a></td></tr>
<tr class="separator:a6d2dfe2cbb9b419618e363eaf4ad6ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678d88ad0058d00769a05499c23b9232"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a678d88ad0058d00769a05499c23b9232">align_offset</a></td></tr>
<tr class="separator:a678d88ad0058d00769a05499c23b9232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a3cb96a764a6492d9fcbb0347a5307"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a9c407f1fb4c58b16b4b42472b0cb7462"><td class="memItemLeft" >
&#160;&#160;&#160;struct {</td></tr>
<tr class="memitem:a85cb9b35e7a28ed5cd716c01478ef7f0"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#ae568883982b786f72700d252f3ff6606">in_use</a></td></tr>
<tr class="separator:a85cb9b35e7a28ed5cd716c01478ef7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b6e3b51984d508324cea1281f791eb"><td class="memItemLeft" >&#160;&#160;&#160;&#160;&#160;&#160;uint32_t&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a5e0eec3471d58a55b3a94efddd7b5da7">value</a></td></tr>
<tr class="separator:ac7b6e3b51984d508324cea1281f791eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c407f1fb4c58b16b4b42472b0cb7462"><td class="memItemLeft" valign="top">&#160;&#160;&#160;}&#160;&#160;&#160;<b>headroom</b></td></tr>
<tr class="separator:a9c407f1fb4c58b16b4b42472b0cb7462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a3cb96a764a6492d9fcbb0347a5307"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db5/structem__pool__cfg__t.html#ad0a3cb96a764a6492d9fcbb0347a5307">pkt</a></td></tr>
<tr class="separator:ad0a3cb96a764a6492d9fcbb0347a5307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3929a4fcd68d78ef12347bb6f230fd3a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a3929a4fcd68d78ef12347bb6f230fd3a">num_subpools</a></td></tr>
<tr class="separator:a3929a4fcd68d78ef12347bb6f230fd3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e97b119364bb5d75b99b7e96f1bf7d5"><td class="memItemLeft" ><a id="a0e97b119364bb5d75b99b7e96f1bf7d5"></a>
struct {</td></tr>
<tr class="memitem:a1b8a1deae905896d188e5c4a9cc7e610"><td class="memItemLeft" >&#160;&#160;&#160;uint32_t&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#aa5bc1f167d26d7ea9c30f8d720fe209a">size</a></td></tr>
<tr class="separator:a1b8a1deae905896d188e5c4a9cc7e610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069d3f5a22f02291d7a3520112819ae3"><td class="memItemLeft" >&#160;&#160;&#160;uint32_t&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a3f8e331ebdc0f001c76e4b89b40124e6">num</a></td></tr>
<tr class="separator:a069d3f5a22f02291d7a3520112819ae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af517340639f939b2903b7184d634e0d9"><td class="memItemLeft" >&#160;&#160;&#160;uint32_t&#160;&#160;&#160;<a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a783e3e9dafe05be89ccfe13b3949842d">cache_size</a></td></tr>
<tr class="separator:af517340639f939b2903b7184d634e0d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e97b119364bb5d75b99b7e96f1bf7d5"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><b>subpool</b> [<a class="el" href="../../d0/d07/event__machine__hw__types_8h.html#ad90f05ee400eaa4f639d46805c4d019d">EM_MAX_SUBPOOLS</a>]</td></tr>
<tr class="separator:a0e97b119364bb5d75b99b7e96f1bf7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751890882d1327539e870004a10a1219"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db5/structem__pool__cfg__t.html#a751890882d1327539e870004a10a1219">__internal_check</a></td></tr>
<tr class="separator:a751890882d1327539e870004a10a1219"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>EM pool configuration</p>
<p>Configuration of an EM event pool consisting of up to 'EM_MAX_SUBPOOLS' subpools, each supporting a specific event payload size. Event allocation, i.e. <a class="el" href="../../d5/d33/group__em__event.html#ga15a17cee0e5de5062e78f7db2b836761">em_alloc()</a>, will use the subpool that provides the best fit for the requested size.</p>
<p>Example usage: </p><div class="fragment"><div class="line"><a class="code" href="../../d2/db5/structem__pool__cfg__t.html">em_pool_cfg_t</a> pool_cfg;</div><div class="line"></div><div class="line"><a class="code" href="../../d1/d85/group__em__pool.html#ga0a0585d9c293ce9d93d2b7235935313a">em_pool_cfg_init</a>(&amp;pool_cfg); <span class="comment">// init with default values (mandatory)</span></div><div class="line">pool_cfg.<a class="code" href="../../d2/db5/structem__pool__cfg__t.html#a8df13d5f2195860c030809996ca4f493">event_type</a> = <a class="code" href="../../d0/d07/event__machine__hw__types_8h.html#ace0fe27049350469ff1be8188acfea89a3ee5e35cc122532fcbdcd183735463d7">EM_EVENT_TYPE_PACKET</a>;</div><div class="line">...</div><div class="line">pool_cfg.num_subpools = 4;</div><div class="line">pool_cfg.subpool[0].<a class="code" href="../../d2/db5/structem__pool__cfg__t.html#aa5bc1f167d26d7ea9c30f8d720fe209a">size</a> = X;</div><div class="line">pool_cfg.subpool[0].<a class="code" href="../../d2/db5/structem__pool__cfg__t.html#a3f8e331ebdc0f001c76e4b89b40124e6">num</a> = Y;</div><div class="line">pool_cfg.subpool[0].<a class="code" href="../../d2/db5/structem__pool__cfg__t.html#a783e3e9dafe05be89ccfe13b3949842d">cache_size</a> = Z;</div><div class="line">...</div><div class="line">pool = <a class="code" href="../../d1/d85/group__em__pool.html#ga05acc37c035cef81910e8ea77e5db158">em_pool_create</a>(..., &amp;pool_cfg);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00088">88</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a751890882d1327539e870004a10a1219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a751890882d1327539e870004a10a1219">&#9670;&nbsp;</a></span>__internal_check</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t em_pool_cfg_t::__internal_check</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Internal check - don't touch!</p>
<p>EM will verify that em_pool_cfg_init(pool_cfg) has been called before creating a pool with em_pool_create(..., pool_cfg) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00188">188</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="a678d88ad0058d00769a05499c23b9232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678d88ad0058d00769a05499c23b9232">&#9670;&nbsp;</a></span>align_offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   em_pool_cfg_t::align_offset</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Alignment offset in bytes for the event payload start address (for all events allocated from this EM pool).</p>
<p>The default EM event payload start address alignment is a power-of-two that is at minimum 32 bytes (i.e. 32 B, 64 B, 128 B etc. depending on e.g. target cache-line size). The 'align_offset.value' option can be used to fine-tune the start-address by a small offset to e.g. make room for a small SW header before the rest of the payload that might need a specific alignment for direct HW-access. Example: setting 'align_offset.value = 8' makes sure that the payload <em>after</em> 8 bytes will be aligned at minimum (2^x) 32 bytes.</p>
<p>This option conserns all events allocated from the pool and overrides the global config file option 'pool.align_offset' for this pool. </p>

</div>
</div>
<a id="a783e3e9dafe05be89ccfe13b3949842d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783e3e9dafe05be89ccfe13b3949842d">&#9670;&nbsp;</a></span>cache_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t em_pool_cfg_t::cache_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum number of locally cached subpool events per EM-core.</p>
<p>Allocating or freeing events from a core-local event-cache can be faster than using the global event subpool. Cached events are only available on the local core and can reduce the number of globally free events in the subpool, thus consider setting 'num &gt; EM-core-count * cache_size'. The actual used cache_size will be smaller than or equal to the requested value, depending on the implementation. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00179">179</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="a8df13d5f2195860c030809996ca4f493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df13d5f2195860c030809996ca4f493">&#9670;&nbsp;</a></span>event_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d11/event__machine__types_8h.html#a49fd700da185b0f64834bf967479a992">em_event_type_t</a> em_pool_cfg_t::event_type</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event type determines the pool type used:</p><ul>
<li>EM_EVENT_TYPE_SW creates subpools of type 'ODP_POOL_BUFFER' This kind of EM pool CANNOT be used to create events of major type EM_EVENT_TYPE_PACKET.</li>
<li>EM_EVENT_TYPE_PACKET creates subpools of type 'ODP_POOL_PACKET' This kind of EM pool can be used for events of all kinds. <dl class="section note"><dt>Note</dt><dd>Only major types are considered here, setting minor is error </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00098">98</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="ae568883982b786f72700d252f3ff6606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae568883982b786f72700d252f3ff6606">&#9670;&nbsp;</a></span>in_use</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int em_pool_cfg_t::in_use</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Select: Use pool-specific align-offset 'value' from below or use the global default value from the config file. false (0): Use value from the config file (default). true (not 0): Use pool specific value set below.</p>
<p>Select: Use pool-specific packet headroom value from below or use the global default value from the config file. false (0): Use value from the config file (default). true (not 0): Use pool specific value set below. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00123">123</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="a3f8e331ebdc0f001c76e4b89b40124e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f8e331ebdc0f001c76e4b89b40124e6">&#9670;&nbsp;</a></span>num</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t em_pool_cfg_t::num</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of events in the subpool (num &gt; 0) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00167">167</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="a3929a4fcd68d78ef12347bb6f230fd3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3929a4fcd68d78ef12347bb6f230fd3a">&#9670;&nbsp;</a></span>num_subpools</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int em_pool_cfg_t::num_subpools</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of subpools within one EM pool, max=EM_MAX_SUBPOOLS </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00162">162</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="ad0a3cb96a764a6492d9fcbb0347a5307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0a3cb96a764a6492d9fcbb0347a5307">&#9670;&nbsp;</a></span>pkt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   em_pool_cfg_t::pkt</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parameters for an EM-pool with '.event_type = EM_EVENT_TYPE_PACKET' Ignored for other pool types. </p>

</div>
</div>
<a id="aa5bc1f167d26d7ea9c30f8d720fe209a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5bc1f167d26d7ea9c30f8d720fe209a">&#9670;&nbsp;</a></span>size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t em_pool_cfg_t::size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Event payload size of the subpool (size &gt; 0) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00165">165</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<a id="a5e0eec3471d58a55b3a94efddd7b5da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e0eec3471d58a55b3a94efddd7b5da7">&#9670;&nbsp;</a></span>value</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t em_pool_cfg_t::value</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pool-specific event payload alignment offset value in bytes (only evaluated if 'in_use=true'). Overrides the config file value for this pool. The given 'value' must be a small power-of-two: 2, 4, or 8 0: Explicitly set 'No align offset' for the pool.</p>
<p>Pool-specific packet minimum headroom in bytes, each packet must have at least this much headroom. (only evaluated if 'in_use=true'). Overrides the config file value for this pool. 0: Explicitly set 'No align offset' for the pool. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html#l00131">131</a> of file <a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="../../d2/d8f/event__machine__pool_8h_source.html">event_machine_pool.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
  <div id="footer" class="tabs">
   <div class="headertitle"> 
     &copy; 2017 Nokia Networks
   </div>
  </div>
 </body>
</html>
